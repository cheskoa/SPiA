#include <iostream>
#include <vector>
using namespace std;

class BP_P{
    int bp;
    vector<int> p;
public:
    BP_P(int x, vector<int> y){
        bp = x;
        p = y;
    }
    void print_broj_ponavljanja(){cout<<bp<<endl;};
    void print_pozicije(){
        for(auto poz : p) cout<<poz<<" ";cout<<endl;
    }
};

template<typename T>
vector<int> pozicije(vector<T>v, int p, int k, T x){
    if(p==k)if(v[p]==x){
        return vector<int>{p};
    }else return {};
    if(p+1==k){
        if(v[p]==x){
            if(v[p+1]==x)return vector<int>{p,p+1};
            return vector<int>{p};
        }
    }
    if(p+2==k){
        if(v[p]==x){
            if(v[p+1]==x){
                if(v[p+2]==x)return vector<int>{p,p+1,p+2};
                return vector<int>{p,p+1};
            }
            return vector<int>{p};
        }
    }
    int mid =(p+k)/2;
    vector<int> l = pozicije(v,p,mid,x);
    vector<int> r = pozicije(v,mid+1,k,x);
    l.insert(l.end(), r.begin(), r.end());
    return l;
}

template<typename T>
int broj_ponavljanja(vector<T>&v,int p, int k,T x){
    if(p == k)if(v[p]==x){
        return 1;
    }else return 0;
    if(p+1==k){
        if(v[p]==x){
            if(v[p+1]==x)return 2;
            return 1;
        }
    }
    if(p+2==k){
        if(v[p]==x){
            if(v[p+1]==x){
                if(v[p+2]==x)return 3;
                return 2;
            }
            return 1;
        }
    }
    int mid = (p+k)/2;
    int l = broj_ponavljanja(v,p,mid,x);
    int r = broj_ponavljanja(v,mid+1,k,x);
    int rez = 0;
    rez = l + r;
    return rez;
}
template<typename T>
BP_P broj_ponavljanja_i_pozicije(vector<T>&v, T x){
    if(v.size()<1)throw "Niz je prazan";
    return BP_P(broj_ponavljanja(v,0,v.size()-1,x), pozicije(v,0,v.size()-1,x));
}
int main() {
    try{
    vector<int> v{0,2,4,3,5,7,2,5,3,7,3,2,4,7,5,3,2};
    auto rez = broj_ponavljanja_i_pozicije(v,2);
    rez.print_broj_ponavljanja();
    rez.print_pozicije();
    }catch(const char* msg){cout<<msg;}
}
